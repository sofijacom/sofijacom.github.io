<script>
function getGiscusTheme() {
  const quartoTheme = localStorage.getItem("quarto-color-scheme");
  const giscusTheme = quartoTheme === "alternate" ? "dark" : "light";
  return giscusTheme;
}

function setGiscusTheme() {
  function sendMessage(message) {
    const iframe = document.querySelector('iframe.giscus-frame');
    if (!iframe) return;
    iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
  }
  sendMessage({
    setConfig: {
      theme: getGiscusTheme(),
    },
  });
}

document.addEventListener('DOMContentLoaded', function () {
  const giscusAttributes = {
    "src": "https://giscus.app/client.js",
    "data-repo": "sofijacom/sofijacom.github.io",
    "data-repo-id": "R_kgDON7iIDw",
    "data-category": "Announcements",
    "data-category-id": "DIC_kwDON7iID84Cq1Zx",
    "data-mapping": "pathname",
    "data-strict": "0",
    "data-reactions-enabled": "1",
    "data-emit-metadata": "0",
    "data-input-position": "bottom",
    "data-theme": getGiscusTheme(),
    "data-lang": "en",
    "crossorigin": "anonymous",
    "async": "",
  };

  // Dynamically create script tag
  const giscusScript = document.createElement("script");
  Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value));
  document.body.appendChild(giscusScript);

  // Update giscus theme when theme switcher is clicked
  const toggle = document.querySelector('.quarto-color-scheme-toggle');
  if (toggle) {
    toggle.addEventListener('click', setGiscusTheme);
  }
});

</script>

<!--
<script src="https://giscus.app/client.js"
        data-repo="sofijacom/sofijacom.github.io"
        data-repo-id="R_kgDON7iIDw"
        data-category="Announcements"
        data-category-id="DIC_kwDON7iID84Cq1Zx"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="1"
        data-input-position="bottom"
        data-theme="catppuccin_latte"
        data-lang="en"
        crossorigin="anonymous"
        async>

</script>
-->
<!--
// "bottom" "top"
// light, dark, catppuccin_latte, catppuccin_macchiato, gruvbox_light, transparent_dark, preferred_color_scheme, cobalt, purple_dark
-->


<style>
.giscus, .giscus-frame {
  width: 100%;
  min-height: 150px;
}

.giscus-frame {
    border: 1px solid #4c4f69;
    border-radius: 20px;
    color-scheme: light dark;    
}
.giscus-frame--loading {
  opacity: 0;
}
</style>

